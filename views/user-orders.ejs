<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MahaShop | My Orders</title>
  <link rel="stylesheet" href="/style.css">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
   <!-- <link rel="stylesheet" href="products.css"> -->
    <link rel="stylesheet" href="/style.css">

    <!-- Font Awesome -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
  <style>
    *{
      margin: 0;
      padding: 0;
    }
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --dark:#0b1220;
      --muted:#6b7280;
      --gold:#d4a100;
      --border:#eef0f4;
      margin: 0;
      padding: 0;
    }

    *{margin:0;padding:0}

    body{
      font-family:Poppins,sans-serif;
      background:var(--bg);
      color:var(--dark);
    }

    /* Navbar */
    .navbar{
      background:#fff;
      padding:15px 40px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      box-shadow:0 2px 10px rgba(0,0,0,0.03);
    }

    .logo{
      font-size:22px;
      font-weight:700;
      color:#000;
    }
    .logo span{color:var(--gold)}

    .nav-links a{
      text-decoration:none;
      color:#333;
      margin-left:20px;
      font-size:14px;
      font-weight:500;
    }

    /* Page */
    .container{
      max-width:1100px;
      margin:30px auto;
      background:var(--card);
      border-radius:18px;
      box-shadow:0 8px 30px rgba(0,0,0,0.04);
      padding:25px 30px;
    }

    .head{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:20px;
    }

    .head h2{
      font-size:22px;
      font-weight:700;
    }

    .order-count{
      font-size:13px;
      color:var(--muted);
      background:#fff7e5;
      padding:6px 12px;
      border-radius:10px;
      font-weight:600;
      color:#aa8500;
    }

    /* Table */
    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0 12px;
    }

    thead th{
      font-size:13px;
      text-transform:uppercase;
      color:var(--muted);
      text-align:left;
      padding:10px;
    }

    tbody tr{
      background:#fff;
      box-shadow:0 5px 15px rgba(0,0,0,0.03);
      border-radius:12px;
    }

    tbody td{
      padding:16px 12px;
      font-size:14px;
      font-weight:500;
    }

    tbody tr td:first-child{
      border-top-left-radius:12px;
      border-bottom-left-radius:12px;
      font-weight:700;
    }

    tbody tr td:last-child{
      border-top-right-radius:12px;
      border-bottom-right-radius:12px;
    }

    /* Status Badges */
    .badge{
      padding:8px 14px;
      border-radius:10px;
      font-size:12px;
      font-weight:700;
      display:inline-block;
    }

    .pending{
      background:rgba(255,193,7,0.12);
      color:#b58300;
    }

    .approved{
      background:rgba(40,167,69,0.12);
      color:#218838;
    }

    .completed{
      background:rgba(0,123,255,0.12);
      color:#0056b3;
    }

    .cancelled{
      background:rgba(220,53,69,0.12);
      color:#a71d2a;
    }

    .empty{
      text-align:center;
      padding:50px 10px;
      font-size:14px;
      color:var(--muted);
    }
    .outfordelivery{
  background: rgba(0, 123, 255, 0.12);
  color:#0056b3;
}
/* ================== RESPONSIVE - DO NOT CHANGE DESIGN ================== */

/* Tablet */
@media(max-width: 992px){
  .container{
    margin:20px 15px;
    padding:20px;
  }

  .navbar{
    padding:12px 20px;
  }
}

/* Mobile */
@media(max-width: 768px){

  .navbar{
    flex-direction:column;
    gap:10px;
    text-align:center;
  }

  .nav-links{
    display:flex;
    gap:15px;
    justify-content:center;
  }

  .container{
    margin:15px 10px;
    padding:15px;
  }

  /* Make table horizontally scrollable */
  .container{
    overflow-x:auto;
  }

  table{
    min-width:800px; /* keeps design intact */
  }

  .head{
    flex-direction:column;
    gap:8px;
    align-items:flex-start;
  }

  .order-count{
    align-self:flex-start;
  }
}

/* Small Mobile */
@media(max-width: 480px){

  .logo{
    font-size:18px;
  }

  .head h2{
    font-size:18px;
  }

  thead th,
  tbody td{
    font-size:12px;
    padding:10px 6px;
  }

  .badge{
    font-size:11px;
    padding:6px 10px;
  }
}
.nav-container{
  max-width:1100px;
  margin:0 auto;
  padding:0;
  background:transparent;
  box-shadow:none;
  border-radius:0;
}


  </style>
</head>
<body>


<header class="site-header">
  <div class="nav-container header-inner">

    <!-- LOGO -->
    <a class="brand" href="/dashboard">
      <img src="/image/pic11.png" id="picsate" style="margin-top: 10px;">
    </a>

  

    <!-- NAVIGATION -->
    <nav class="main-nav" id="mainNav">

      <button class="close-menu" id="closeBtn">
        <i class="fa-solid fa-xmark"></i>
      </button>

      <a href="/dashboard">Home</a>
      <a href="/products">Shop</a>
      <a href="/products/clothes">Clothes</a>
      <a href="/products/shoes">Shoes</a>
      <a href="/products/watches">Watches</a>
      <a href="/my-orders">ðŸ“¦ My Orders</a>
      <a href="/logout" class="logout-link">ðŸšª Logout</a>

    </nav>

    <!-- CART + USER -->
    <div class="nav-actions">
      <span class="greeting" style="font-weight: bold;"><span style="color: orangered;font-weight: bold;">Hi,</span> <%= user.fullName %></span>
      <a href="/cart"><i class="fa-solid fa-cart-shopping" id="imp"></i></a>
    </div>
  <!-- MENU ICON -->
    <button class="menu-toggle" id="menuBtn">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>
</header>

<!-- MAIN -->
<div class="container">

  <div class="head">
    <h2>ðŸ“¦ My Orders</h2>
    <div class="order-count"><%= orders.length %> Orders</div>
  </div>

  <table>
   <thead>
  <tr>
    <th>Order ID</th>
    <th>Product</th>
    <th>Size</th>
    <th>Color</th>
    <th>Qty</th>
    <th>Price</th>
    <th>Total</th>
    <th>Status</th>
    <th>Placed On</th>
  </tr>
</thead>

<tbody>
<% if(orders.length > 0){ %>
  <% orders.forEach(order => { %>
    <% order.items.forEach(item => { %>
      <tr>
        <td>#<%= order._id.toString().slice(-6) %></td>

        <!-- Product Name -->
        <td><%= item.name || item.productName || 'N/A' %></td>

        <!-- Size -->
        <td><%= item.size || 'N/A' %></td>

        <!-- Color -->
        <td><%= item.color || 'N/A' %></td>

        <!-- Quantity -->
        <td><%= item.qty || item.quantity || 1 %></td>

        <!-- Price -->
        <td>$<%= (item.price || 0).toFixed(2) %></td>

        <!-- Total -->
        <td>$<%= ((item.price || 0) * (item.qty || item.quantity || 1)).toFixed(2) %></td>

        <!-- Status -->
        <td>
          <span class="badge <%= order.status.toLowerCase().replace(/\s/g,'') %>">
            <%= order.status %>
          </span>
        </td>

        <!-- Date -->
        <td><%= new Date(order.createdAt).toLocaleDateString() %></td>
      </tr>
    <% }) %>
  <% }) %>
<% } else { %>
  <tr>
    <td colspan="9" class="empty">You havenâ€™t placed any orders yet.</td>
  </tr>
<% } %>
</tbody>



  </table>
</div>

<script src="/logout-modal.js"></script>

<script>
  const menuBtn = document.getElementById("menuBtn");
  const closeBtn = document.getElementById("closeBtn");
  const nav = document.getElementById("mainNav");

  menuBtn.onclick = () => nav.classList.add("show");
  closeBtn.onclick = () => nav.classList.remove("show");
</script>
</body>
</html>
