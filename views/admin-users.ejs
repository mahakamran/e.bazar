<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>E.BAZAR ‚Äî Admin Users</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg:#f6f7fb;
      --card:#fff;
      --muted:#687182;
      --accent:#FFD700;
      --dark:#0b1220;
    }

    * { box-sizing:border-box; }

    body {
      margin:0;
      font-family:Poppins,system-ui;
      background:var(--bg);
      color:var(--dark);
    }

    .app {
      display:flex;
      min-height:100vh;
    }

    /* Sidebar */
    .sidebar {
      width:260px;
      background:#0f1724;
      color:#fff;
      padding:22px 18px;
      display:flex;
      flex-direction:column;
      gap:18px;
      transition:.3s ease;
    }

    .brand {
      display:flex;
      align-items:center;
      gap:12px;
    }

    .brand img {
      width:44px;
      height:44px;
      border-radius:8px;
      object-fit:cover;
    }

    .brand .title {
      font-weight:700;
      font-size:18px;
    }

    .nav {
      margin-top:6px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .nav a {
      color:#c9d2df;
      text-decoration:none;
      padding:10px;
      border-radius:8px;
      display:flex;
      align-items:center;
      gap:10px;
    }

    .nav a.active,
    .nav a:hover {
      background:rgba(255,215,0,0.12);
      color:var(--accent);
    }

    .small { font-size:12px; color:#9aa6b8; }

    /* Main Content */
    .main {
      flex:1;
      padding:20px 28px;
    }

    .topbar {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-bottom:20px;
    }

    .search {
      flex:1;
      max-width:520px;
      display:flex;
      gap:8px;
    }

    .search input {
      flex:1;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #e6e9ee;
    }

    .top-actions {
      display:flex;
      align-items:center;
      gap:12px;
    } 

    .icon-btn {
      background:var(--card);
      padding:8px;
      border-radius:10px;
      border:1px solid #e6e9ee;
    }

    /* Card */
    .card {
      background:var(--card);
      padding:20px;
      border-radius:12px;
      box-shadow:0 6px 18px rgba(11,17,32,0.04);
    }

    /* Table */
    table {
      width:100%;
      border-collapse:collapse;
      margin-top:12px;
    }

    th, td {
      padding:14px 10px;
      border-bottom:1px solid #f0f2f6;
      text-align:left;
    }

    th {
      color:var(--muted);
      font-size:13px;
      font-weight:600;
    }

    td .badge {
      padding:6px 10px;
      border-radius:6px;
      font-size:13px;
      font-weight:600;
    }

    .active-b {
      background:rgba(40,167,69,0.12);
      color:#28a745;
    }

    .blocked-b {
      background:rgba(255,0,0,0.12);
      color:#d62828;
    }

    .edit-btn, .delete-btn {
      padding:6px 12px;
      border-radius:6px;
      cursor:pointer;
      border:none;
      font-size:13px;
    }

    .edit-btn { background:#FFD700; color:#000; }
    .delete-btn { background:#e63946; color:#fff; }

    /* ===== Mobile Top Bar ===== */
    .mobile-bar{
      display:none;
      justify-content:space-between;
      align-items:center;
      background:#fff;
      padding:12px 16px;
      border-bottom:1px solid #eee;
    }

    .mobile-bar button{
      font-size:22px;
      background:none;
      border:none;
      cursor:pointer;
    }

    .overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.4);
      display:none;
      z-index:998;
    }

    .overlay.show{display:block}

    /* ===== Mobile & Table to Cards ===== */
    @media(max-width:900px){
      .mobile-bar{display:flex}

      .sidebar{
        position:fixed;
        left:-100%;
        top:0;
        height:100vh;
        z-index:999;
        background:#0f1724;
      }

      .sidebar.show{left:0;}
    }

    @media(max-width:768px){
      table, thead, tbody, tr{
        display:block;
        width:90vw;
        margin-left: 15px;
      }

      thead{display:none}

      #usersBody tr{
        background:#fff;
        margin-bottom:14px;
        padding:14px;
        border-radius:12px;
        box-shadow:0 4px 12px rgba(0,0,0,0.04);
      }

      #usersBody td{
        display:flex;
        justify-content:space-between;
        padding:6px 0;
        border:none;
        font-size:14px;
      }

      #usersBody td:nth-child(1)::before{content:"ID"}
      #usersBody td:nth-child(2)::before{content:"Name"}
      #usersBody td:nth-child(3)::before{content:"Email"}
      #usersBody td:nth-child(4)::before{content:"Phone"}
      #usersBody td:nth-child(5)::before{content:"Role"}
      #usersBody td:nth-child(6)::before{content:"Status"}
      #usersBody td:nth-child(7)::before{content:"Action"}

      #usersBody td::before{
        font-weight:600;
        color:#555;
      }
      
    }
    #usersTable{
        margin-left: 0px !important;
      }
  </style>
</head>

<body>

<!-- Mobile Top Bar -->
<div class="mobile-bar">
  <button id="openMenu">‚ò∞</button>
  <span>Admin Panel</span>
</div>

<div class="overlay" id="overlay"></div>

<div class="app">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <a class="brand" href="#">
      <img src="/mnt/data/A_website_homepage_for_an_e-commerce_platform_name.png">
      <div>
        <div class="title">E.BAZAR Admin</div>
        <div class="small">manage products & users</div>
      </div>
    </a>

    <nav class="nav">
      <a href="/admin/dashboard" class="active">üè† Dashboard</a>
      <a href="/admin/products">üì¶ Products</a>
      <a href="/admin/add-product">‚ûï Add Product</a>
      <a href="/admin/orders">üßæ Orders</a>
      <a href="/admin/users">üë• Users</a>
      <a href="/admin/categories">üìÇ Categories</a>
      <a href="/admin/settings">‚öôÔ∏è Settings</a>
    </nav>

    <div style="margin-top:auto" class="small">
      Logged in as <strong>Admin</strong>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">

    <div class="topbar">
      <div style="display:flex;align-items:center;gap:14px;flex:1">
        <div class="search">
          <input id="userSearch" placeholder="Search users...">
        </div>

        <div class="top-actions">
          <div class="icon-btn">üîî</div>
          <div class="icon-btn">üí¨</div>
        </div>
      </div>
    </div>

    <!-- <div class="card"> -->
      <h2 style="margin:0 0 10px 0";>Registered Users</h2>

      <table id="usersTable" style="margin-left: -40px;">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Role</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody id="usersBody">
          <% users.forEach((u, i) => { %>
          <tr>
            <td>#<%= i + 1 %></td>
            <td><%= u.fullName %></td>
            <td><%= u.email %></td>
            <td><%= u.phone || "N/A" %></td>
            <td><%= u.role || "User" %></td>
            <td>
              <% if(u.isBlocked){ %>
                <span class="badge blocked-b">Blocked</span>
              <% } else { %>
                <span class="badge active-b">Active</span>
              <% } %>
            </td>
            <td>
              <a href="/admin/user/block/<%= u._id %>" class="delete-btn" style="text-decoration:none;">
                <%= u.isBlocked ? "Unblock" : "Block" %>
              </a>
              <a href="/admin/user/delete/<%= u._id %>" class="edit-btn" style="margin-left:6px;text-decoration:none;"
                onclick="return confirm('Are you sure?')">Delete</a>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

  </main>

</div>

<!-- Scripts -->
<script>
const openBtn = document.getElementById("openMenu");
const sidebar = document.querySelector(".sidebar");
const overlay = document.getElementById("overlay");

openBtn.onclick = () => {
  sidebar.classList.add("show");
  overlay.classList.add("show");
};

overlay.onclick = () => {
  sidebar.classList.remove("show");
  overlay.classList.remove("show");
};
</script>

<script>
const searchInput = document.getElementById("userSearch");
const rows = document.querySelectorAll("#usersBody tr");

searchInput.addEventListener("keyup", function () {
  const value = this.value.toLowerCase();
  rows.forEach(row => {
    const rowText = row.innerText.toLowerCase();
    row.style.display = rowText.includes(value) ? "" : "none";
  });
});
</script>

</body>
</html>
